{% extends 'catalogue.html' %}
{% block title%}itMoungoi{% endblock%}
{% block body %}
<style>

.container {
    max-width: 1200px;
    margin: 0 auto;
}


.gallery {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
    gap: 20px;
    margin-top: 20px;
}

.image-card {
    background: white;
    padding: 10px;
    border-radius: 8px;
    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
}

.image-card img {
    width: 100%;
    height: auto;
    border-radius: 4px;
}

button {
    background: #4CAF50;
    color: white;
    padding: 10px 15px;
    border: none;
    border-radius: 4px;
    cursor: pointer;
    margin-top: 10px;
}

button:hover {
    background: #45a049;
}
</style>
<div class="section-orange">
    <div class="container py-5">
        <div class="card shadow mb-5" style="background-color: #2c3e50; color: white">
    <div class="container text-center">
        <nav aria-label="breadcrumb">
            <ol class="breadcrumb justify-content-center">
                <li class="breadcrumb-item"><a href="/">Accueil</a></li>
                <li class="breadcrumb-item active">Parcours</li>
            </ol>
        </nav>
        <h1 class="display-4 mb-4">Découvrez nos formations</h1>
        <p class="lead mb-4">Apprenez des compétences d'aujourd'hui et un métier qui a de l'avenir avec nos formations 100% en ligne</p>
        <button class="btn  btn-lg"><a class="nav-link" href="/inscription">Démarrez mon inscription</a></button>
    </div>
        </div>
</div>
</div>
<main class="py-5">
        <div class="container">
            <div class="row g-4">

    <div class="container">
         <div class="card-body text-center p-4">
        <h1>Galerie d'Images</h1>
        <div class="gallery">
            {% for image in images %}
                <div class="image-card">
                    <img src="{{ url_for('static', filename=image.path) }}" alt="{{ image.title }}">
                    <h3>{{ image.title }}</h3>
                    <button class="delete-btn"
                            data-filename="{{ image.filename }}"
                            onclick="deleteImage(this)">
                        Supprimer
                    </button>
                </div>
            {% endfor %}
        </div>
    </div>
            </div>
        </div>
</main>

    <script>
        function deleteImage(btn) {
            const filename = btn.getAttribute('data-filename');

            fetch(`/delete/${filename}`, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                }
            })
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    btn.closest('.image-card').remove();
                } else {
                    alert('Erreur: ' + (data.error || 'Échec de la suppression'));
                }
            })
            .catch(error => {
                alert('Erreur réseau: ' + error);
            });
        }
    </script>
{% endblock%}