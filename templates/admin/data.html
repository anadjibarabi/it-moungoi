{% extends 'admin/users.html' %}
{% block title %}Конкурсы{% endblock %}
{% block body %}
<div class="container">
    <div class="container mt-5">
        <h2>Table des utilisateur</h2>
    <div class="card shadow mb-5">
        <div class="card-body">
        <div class="row">
         <div class="col md-12">
           <div class="container">
              <div class="jumbotron p-3">
              {% with messages = get_flashed_messages() %}
              {% if messages %}
              {% for message in messages %}
              <div class="alert alert-success alert-dismissable" role="alert">
                  <button type="button" class="close" data-dismiss="alert" aria-label="close">
                      <span aria-hidden="true">x</span>
                  </button>
              {{message}}
              </div>
              {% endfor %}
              {% endif %}
              {% endwith %}
              <table class="table table-hover table-striped">
                  <tr>
                      <th scope="col">id</th>
                      <th scope="col">Username</th>
                      <th scope="col">email</th>
                      <th scope="col">password</th>
                      <th scope="col"> phone</th>
                      <th scope="col">Action</th>
                  </tr>
                 {% for row in users %}
                  <tr>
                    <th scope="row">{{row.id}}</th>
                    <td>{{row.username}}</td>
                    <td>{{row.email}}</td>
                    <td>{{row.password}}</td>
                    <td>{{row.phone}}</td>
                    <td>
                        <a href="/update/{{row.id}}" class="btn btn-warning btn-xs" data-toggle="modal" data-target="#modaledit{{row.id}}">Edit</a>
                        <a href="/delete/{{row.id}}" class="btn btn-danger btn-xs" onclick="return confirm('Are You Sure To Delete ?')">Delete</a>
                    </td>
                  </tr>


<div id="modaledit{{row.id}}" class="modal fade" role="dialog">
      <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content">
      <div class="modal-header">
          <h4 class="modal-title">Update Information</h4>
      </div>
      <div class="modal-body">
      <form action="{{url_for('update')}}" method="POST">
      <div class="form-group">
      <label>Usename:</label>
      <input type="hidden"  name="id" value="{{row.id}}">
     <input type="text" class="form-control" name="name" value="{{row.username}}">
   </div>
   <div class="form-group">
    <label>Email:</label>
    <input type="text" class="form-control" name="email" value="{{row.email}}">
   </div>
   <div class="form-group">
    <label>Password:</label>
    <input type="password" class="form-control" name="password" value="{{row.password}}">
   </div>
   <div class="form-group">
    <label>Phone:</label>
    <input type="text" class="form-control" name="phone" value="{{row.phone}}">
   </div>
          <div>
      <div class="modal-footer">
      <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
    </div>
  </div>
   {% endfor %}
  </table>
 </div>
          </div>
        </div>
      </div>
  </div>
</div>


{% endblock %}